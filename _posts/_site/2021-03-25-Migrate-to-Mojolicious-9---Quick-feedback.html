<p>Today I migrated one application to <a href="https://mojolicious.org/">Mojolicious 9</a> :tada:</p>

<p><img src="/assets/images/0wk9a9c05a3sntlwkydv.png" alt="Mojolicious 9" /></p>

<p>Since I had some errors, I just wanted to share if it could help others to migrate quickly.</p>

<p>EDIT: as commented by @grinnz, there is the <a href="https://github.com/mojolicious/mojo/wiki/Upgrading">upgrading document</a> that should be checked for tips before any attempt to migrate.</p>

<p>It’s not a big application (~2000 lines of code) but it has authentication, external calls, DB access and a flat config loaded at startup. It uses some plugins like <a href="https://metacpan.org/pod/Mojolicious::Plugin::Authentication">Authentication</a>, <a href="https://metacpan.org/pod/Mojolicious::Plugin::Status">Status</a>, <a href="https://metacpan.org/pod/Mojolicious::Plugin::Config">Config</a> and <a href="https://metacpan.org/pod/Mojolicious::Plugin::AccessLog">AccessLog</a>.</p>

<p>I like to think it is a <em>small but good coverage</em> of Mojolicious features.</p>

<p>I said I had errors, but actually very few and I will give my solutions right below.</p>

<h4 id="cant-locate-object-method-route-via-package-mojoliciousroutes">Can’t locate object method “route” via package “Mojolicious::Routes”</h4>

<p>In my case it was a matter of replacing something like:</p>
<div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">my</span> <span class="nv">$auth</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="nv">route</span><span class="p">('</span><span class="s1">/members</span><span class="p">')</span><span class="o">-&gt;</span><span class="nv">over</span><span class="p">(</span><span class="s">authenticated</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div></div>
<p>per something like:</p>
<div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">my</span> <span class="nv">$auth</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="nv">under</span><span class="p">('</span><span class="s1">/members</span><span class="p">')</span><span class="o">-&gt;</span><span class="nv">requires</span><span class="p">(</span><span class="s">authenticated</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div></div>
<p>I wonder if code snippets shown on <a href="https://metacpan.org/pod/Mojolicious::Plugin::Authentication">Mojolicious::Plugin::Authentication doc</a> are still valid for Mojolicious 9 (?).</p>

<h4 id="undefined-subroutine-appcontrollerappdecode_json-called">Undefined subroutine &amp;App::Controller::App::decode_json called</h4>

<p>This sub seems to have moved, I fixed by simply adding:</p>

<div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">Mojo::</span><span class="nv">JSON</span> <span class="sx">qw(decode_json encode_json)</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>
<p>I like Mojolicious :heart: and the way it is so actively developed. It’s true that there is sometimes some small breakages (I remember in the past a breakage about <a href="https://github.com/mimosinnet/presentation/pull/1/files">slurp</a>) but it is always well documented and painless :+1:</p>

<p>Long live to <a href="https://mojolicious.org/">Mojolicious</a>!</p>
