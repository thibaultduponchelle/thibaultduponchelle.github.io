<h1 id="a-word-about-complex-structures-and-debugging">A word about complex structures and debugging</h1>
<p>In Perl (as in majority of other programming languages), you can construct <strong>complex data structures</strong>. By complex, I mean <em>mixed</em> hash and arrays or <em>nested</em> (hash of hashes, array of hashes etc…).</p>

<p>Then it typically requires time and effort to do <strong>“printf debugging”</strong> on these complex structures so that’s the reason why <strong>data dumpers</strong> exist!</p>

<p>So let’s go with the code!</p>

<h2 id="first-fill-a-variable-to-dump">First fill a variable to dump</h2>
<p>I propose this small snippet to create and fill an array with some content:</p>
<div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env perl</span>

<span class="k">my</span> <span class="nv">@array</span> <span class="o">=</span> <span class="p">();</span>
<span class="nb">push</span> <span class="nv">@array</span><span class="p">,</span> <span class="p">"</span><span class="s2">apple</span><span class="p">";</span>
<span class="nb">push</span> <span class="nv">@array</span><span class="p">,</span> <span class="p">"</span><span class="s2">banana</span><span class="p">";</span>
<span class="nb">push</span> <span class="nv">@array</span><span class="p">,</span> <span class="p">"</span><span class="s2">strawberry</span><span class="p">";</span>
<span class="nb">push</span> <span class="nv">@array</span><span class="p">,</span> <span class="p">{</span> <span class="s">name</span> <span class="o">=&gt;</span> <span class="p">"</span><span class="s2">tib</span><span class="p">",</span> <span class="s">color</span> <span class="o">=&gt;</span> <span class="p">"</span><span class="s2">blue</span><span class="p">"</span> <span class="p">};</span>
<span class="nb">push</span> <span class="nv">@array</span><span class="p">,</span> <span class="p">{</span> <span class="s">name</span> <span class="o">=&gt;</span> <span class="p">"</span><span class="s2">bob</span><span class="p">",</span> <span class="s">color</span> <span class="o">=&gt;</span> <span class="p">"</span><span class="s2">red</span><span class="p">"</span> <span class="p">};</span>
</code></pre></div></div>

<p>An array with items where some of them are hashes (refs).</p>

<h2 id="datadumper">Data::Dumper</h2>
<p>First I will dump with the classic <a href="https://metacpan.org/pod/Data::Dumper">Data::Dumper</a> :smiley:</p>

<div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">Data::</span><span class="nv">Dumper</span><span class="p">;</span>
<span class="k">print</span> <span class="nv">Dumper</span><span class="p">(</span><span class="nv">@array</span><span class="p">);</span>
</code></pre></div></div>

<p>The output is already not bad (hash is indented):
<img src="/assets/images/phw94z8n0r2p83v84pbm.png" alt="Data::Dumper" /></p>

<p>To improve output, we can tweak a bit the <a href="https://metacpan.org/pod/Data::Dumper#Configuration-Variables-or-Methods">behavior of Data::Dumper</a> but if you want my opinion there is a better option…</p>

<h2 id="dataprinter">Data::Printer</h2>
<p>First, install <a href="https://metacpan.org/pod/Data::Printer">Data::Printer</a> with a CPAN client <code class="language-plaintext highlighter-rouge">cpanm Data::Printer</code>.</p>

<p><strong>Data::Printer</strong> is not in the core (<strong>Data::Dumper</strong> is) but has no “non-core” dependencies! :dancer:</p>

<div class="language-perl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nv">DDP</span><span class="p">;</span>
<span class="nv">p</span> <span class="nv">@array</span><span class="p">;</span>
</code></pre></div></div>

<p>And tadaa! A nicely formatted and colored data dump :+1:
<img src="/assets/images/tvi6qez55zantjt7edi7.png" alt="Data::Printer" /></p>

