<p><img src="/assets/images/3ahkuxfyxed7dwkrr8n3.jpg" alt="Perl Sysadmin" /></p>

<h2 id="intro">Intro</h2>
<p>Yet another book review ! \o/</p>

<p>This book was released in Y2K. Seems like there was no new edition since then.</p>

<p><strong>Perl for System Administration</strong> is written by <strong>David N. Blank-Edelman</strong>.</p>

<h2 id="very-cool">Very cool</h2>
<h3 id="old-bits">Old bits</h3>
<p>Some fun facts about how <em>old</em> is the book :</p>
<ul>
  <li>The book mentions <strong>“Perl is not ubiquitous”</strong> as a weakness 
when having to choose between Perl and other scripts languages.</li>
  <li>The author thanks Usenix, SAGE and LISA conferences.</li>
  <li>Recommends search.cpan.org :smile:</li>
  <li>“NTFS driver will be integrated in Linux kernel 2.2”… ah memories</li>
</ul>

<h3 id="security">Security</h3>
<p>Security is always one of the numerous hats of a System Administrator…</p>

<p><img src="/assets/images/s94r2hu2yes0f11qz1ai.jpg" alt="Security" /></p>

<p>Here are some notions explained in the book :</p>
<ul>
  <li>Poison null byte (still possible in 2020 ?)</li>
  <li><code class="language-plaintext highlighter-rouge">open(TEMPFILE, "&gt;/tmp/tmp.$$);</code> Predicatble <code class="language-plaintext highlighter-rouge">$$</code> on multi user machine, 
a malicious user can predict and <em>steal</em> a temp file and write custom text/command to force
reader to execute what he wants</li>
  <li>I discovered that “…” “. “ were valid filenames (for bad people).</li>
  <li>Interesting exercise with system monitoring (dates, content, DNS dump…)</li>
  <li>The idea of Postmortem, long time before devops mindset :D</li>
  <li>Classic DDoS SYN flood attack (I think the first time I heard about it was in a story about Kevin Mitnick)</li>
  <li>Cool part mentioning “John the ripper”, “Crack” or “L0phtCrack”. “libcrack” and “npasswd” :skull:</li>
</ul>

<h3 id="things-i-discovered">Things I discovered</h3>
<p>I learnt also :</p>
<ul>
  <li>A lot of things about PPM.</li>
  <li>A lot about macperl : cpan-mac and <strong>installme</strong> where you can drag and drop tarballs to install</li>
</ul>

<h3 id="chapter-about-file-systems">Chapter about file systems</h3>
<p>Very cool !</p>

<ul>
  <li>How MAC is different (data fork, resource fork)</li>
  <li>How Windows is LOL (vfat = how to build something on top of a technical debt)</li>
</ul>

<h3 id="corrupted-check-file">Corrupted check file</h3>
<ul>
  <li>The sample code is cool</li>
  <li>The sysread trick vs &lt; &gt; (read sequentially and stop at first error)</li>
</ul>

<p>In general, how the author tells a story and explains sysadmin concepts each time is very cool – I LOVE IT –</p>

<h3 id="quotas">Quotas</h3>
<p>How quotas are explained is very cool.</p>

<p>Quotas edition samples are a bit hacky and brittle (not by the fault of the author) but proves “how to get the job done” with Perl.</p>

<h3 id="handling-users">Handling users</h3>
<p>Some tips detailed:</p>
<ul>
  <li>GID is primary group</li>
  <li>We can have a group password</li>
  <li>Password <code class="language-plaintext highlighter-rouge">*</code> to disable login</li>
  <li><code class="language-plaintext highlighter-rouge">$&lt;</code> and <code class="language-plaintext highlighter-rouge">$&gt;</code> and <code class="language-plaintext highlighter-rouge">$)</code> and <code class="language-plaintext highlighter-rouge">$(</code> for real/effective user/group</li>
</ul>

<h4 id="windows">Windows</h4>
<ul>
  <li>Windows : RID + DID = SID</li>
  <li>Impossible to recreate same user then computer owner change implies to rename user</li>
  <li>Windows cannot <em>give</em> ownership, we can only <em>take</em> ownership</li>
</ul>

<h4 id="unix-vs-win">Unix vs Win</h4>
<ul>
  <li>There is a password hash incompatibility (algorithm)</li>
  <li>On Unix there is a superuser whereas on Windows it’s more like super-heros (users with super powers)</li>
</ul>

<h3 id="sysadmin-mindset">Sysadmin mindset</h3>
<p>Sysadmins have their own mindset (and the ones I know have a great sense of humor).</p>

<p><img src="/assets/images/hzypd39kfrex3vb1883r.jpg" alt="Sysadmin starter pack" /></p>

<ul>
  <li>“Nothing is foolproof because fools are so ingenious”</li>
  <li>“Something is wrong and I have no idea what” (how some users report problems) lol</li>
  <li>“Sysadmins are log file linguists”</li>
  <li>“Handle with pack and unpack - this way lies madness and misery” :smiley:</li>
  <li>“There are times where death is too good for a process”</li>
  <li>“Security is continuum”</li>
  <li>“You can be more secure but you will never be 100% secure” and in the same theme “It is always possible to find more to fear”</li>
  <li>“Oog’s password to get back into the clan’s cave was probably “oog” “ (about weak passwords)</li>
  <li>“Detect local signs of perils” (nothing special but it sounds good to me :smile:)</li>
  <li>“Learn something from incident instead of only loosing time and effort”</li>
  <li>“An user does not login from a lot of different places” (probably still true today even in the “mobility world” that we know today)</li>
</ul>

<h3 id="process-handling">Process handling</h3>
<p>Very nice chapter !</p>
<ul>
  <li>Inspect process with <code class="language-plaintext highlighter-rouge">/dev/kmem</code>, <code class="language-plaintext highlighter-rouge">Proc::ProcessTable</code>, <code class="language-plaintext highlighter-rouge">ps</code>, <code class="language-plaintext highlighter-rouge">proc</code></li>
  <li>Filewatcher windows very contemporary</li>
</ul>

<h3 id="directories-services">Directories services</h3>
<ul>
  <li>finger</li>
  <li>whois</li>
  <li>LDAP (LDIF)</li>
  <li>Active Directory (ADSI, DCOM, OLE)</li>
</ul>

<p>Caracteristics : structured or not, some implementation details etc…</p>

<p>Networked, remote, hierarchical, structured, read many write few…</p>

<p>Very good chapter about LDAP, I skipped some parts at the end, but at least I have ready to use code if needed.</p>

<h3 id="other-cool-things">Other cool things</h3>
<ul>
  <li>Control Windows windows with API !</li>
  <li>Security bits</li>
  <li>References at the end of chapter, original but cool</li>
  <li>Very nice chapter about DNS</li>
</ul>

<h2 id="not-cool">Not cool</h2>
<ul>
  <li>Not for Perl beginners, sometimes complex notions are thrown without any explanation (<code class="language-plaintext highlighter-rouge">@</code>, <code class="language-plaintext highlighter-rouge">\%</code>, <code class="language-plaintext highlighter-rouge">keys</code>, <code class="language-plaintext highlighter-rouge">map</code>, <code class="language-plaintext highlighter-rouge">$_</code>, <code class="language-plaintext highlighter-rouge">refs</code>)</li>
  <li>Sometimes too much details that will be outdated one day after the book is released (a bug in a very specific version of <code class="language-plaintext highlighter-rouge">Net::NIS</code>…)</li>
  <li>Sometimes too much code (one snippet was 5 pages long, tldr;)</li>
  <li>Lost with chapter about XML, not clear</li>
  <li>SNMP and LDAP are probably not so well explained</li>
</ul>

<h2 id="various-tips-and-tricks">Various Tips and tricks</h2>
<ul>
  <li>Compare 2 tabs that contains numbers <code class="language-plaintext highlighter-rouge">if("@arr[1..12]" ne "@arr2")</code> nice Perl idiom (slice then convert to string to compare).</li>
  <li>Do you know the SQL “SELECT … <em>INTO</em> …” ? Me not ! :grin:</li>
  <li>Good idea to compare SQL operators to Perl regex operators !</li>
</ul>

<h2 id="appendix">Appendix</h2>
<p>There are really short introductions, quality depends the topic:</p>
<ul>
  <li>XS and XML intros are cool.</li>
  <li>LDAP and SNMP intros are too hard.</li>
</ul>

<h2 id="conclusion">Conclusion</h2>
<p>Very pleasant to let the author give a tour of Operating Systems for us for each topic, even (especially) if I’m less interested in some OS.</p>

<p>You should read this book! Definitely ! :+1:</p>
